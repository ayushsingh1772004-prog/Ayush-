<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rooftop Rainwater Harvesting Calculator</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-tint"></i>
                    <h1>RainHarvest Pro</h1>
                </div>
                <div class="header-controls">
                    <div class="language-selector">
                        <select id="languageSelect">
                            <option value="en">English</option>
                            <option value="hi">हिंदी</option>
                            <option value="te">తెలుగు</option>
                            <option value="ta">தமிழ்</option>
                        </select>
                    </div>
                    <div class="theme-toggle">
                        <button id="darkModeToggle" class="theme-btn">
                            <i class="fas fa-moon"></i>
                        </button>
                    </div>
                    <div class="auth-section">
                        <!-- Guest View -->
                        <div id="guestAuth" class="auth-guest">
                            <button id="loginBtn" class="auth-btn">
                                <i class="fas fa-sign-in-alt"></i>
                                <span>Login</span>
                            </button>
                            <button id="registerBtn" class="auth-btn secondary">
                                <i class="fas fa-user-plus"></i>
                                <span>Sign Up</span>
                            </button>
                        </div>
                        <!-- Logged In View -->
                        <div id="userAuth" class="auth-user" style="display: none;">
                            <div class="user-menu">
                                <button id="userMenuBtn" class="user-menu-btn">
                                    <i class="fas fa-user-circle"></i>
                                    <span id="userName">User</span>
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                                <div id="userDropdown" class="user-dropdown">
                                    <a href="#" id="profileBtn">
                                        <i class="fas fa-user"></i>
                                        Profile
                                    </a>
                                    <a href="#" id="historyBtn">
                                        <i class="fas fa-history"></i>
                                        History
                                    </a>
                                    <a href="#" id="settingsBtn">
                                        <i class="fas fa-cog"></i>
                                        Settings
                                    </a>
                                    <hr>
                                    <a href="#" id="logoutBtn">
                                        <i class="fas fa-sign-out-alt"></i>
                                        Logout
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-layout">
                <div class="hero-content">
                    <div class="hero-pill">
                        <i class="fas fa-wand-magic-sparkles"></i>
                        <span>AI-guided insights</span>
                    </div>
                    <h2 data-translate="hero.title">
                        Smart Rainwater Harvesting,
                        <span>designed for your rooftop.</span>
                    </h2>
                    <p data-translate="hero.subtitle">Discover feasibility, cost, and impact in one immersive dashboard powered by live weather intelligence.</p>
                    <div class="hero-actions">
                        <a href="#formSection" class="cta primary">
                            <span data-translate="hero.ctaPrimary">Start Free Assessment</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                        <a href="#resultsSection" class="cta ghost">
                            <i class="fas fa-circle-play"></i>
                            <span data-translate="hero.ctaSecondary">Watch Flow Demo</span>
                        </a>
                    </div>
                    <div class="hero-stats">
                        <div class="stat">
                            <span class="stat-value">10k+</span>
                            <span data-translate="hero.stat1">Homes analyzed</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">40%</span>
                            <span data-translate="hero.stat2">Average bill savings</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value">22M</span>
                            <span data-translate="hero.stat3">Liters conserved</span>
                        </div>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="hero-visual-card primary-card">
                        <div class="card-label">Annual Rain Score</div>
                        <div class="card-value">A+</div>
                        <p>High consistency of monsoon showers, ideal for recharge pits.</p>
                        <div class="trend positive">
                            <i class="fas fa-arrow-trend-up"></i>
                            <span>+12% vs last year</span>
                        </div>
                    </div>
                    <div class="hero-visual-card secondary-card">
                        <div class="mini-metric">
                            <span>Potential</span>
                            <strong>68,400 L/yr</strong>
                        </div>
                        <div class="mini-metric">
                            <span>Payback</span>
                            <strong>18 months</strong>
                        </div>
                        <div class="mini-metric">
                            <span>Confidence</span>
                            <strong>92%</strong>
                        </div>
                    </div>
                    <div class="hero-glow"></div>
                </div>
            </div>
        </section>

        <!-- Insight Highlights -->
        <section class="insights-section">
            <div class="section-header">
                <p class="eyebrow">Why RainHarvest Pro</p>
                <h3>Premium decision support for modern homes</h3>
                <p>Precision feasibility, transparent costs, and actionable sustainability playbooks.</p>
            </div>
            <div class="insights-grid">
                <article class="insight-card">
                    <div class="card-icon glass">
                        <i class="fas fa-satellite-dish"></i>
                    </div>
                    <h4>Hyperlocal forecasting</h4>
                    <p>We blend IMD data, NASA rainfall grids, and city runoff coefficients to make your estimates bulletproof.</p>
                </article>
                <article class="insight-card">
                    <div class="card-icon glass">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <h4>System design presets</h4>
                    <p>Instant blueprints for RCC, metal, and tile roofs with storage, filtration, and recharge mixes optimized.</p>
                </article>
                <article class="insight-card">
                    <div class="card-icon glass">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <h4>Impact storytelling</h4>
                    <p>Translate liters into tree equivalents, groundwater rise, and ESG score boosts for HOAs and boards.</p>
                </article>
                <article class="insight-card">
                    <div class="card-icon glass">
                        <i class="fas fa-gauge-high"></i>
                    </div>
                    <h4>Live readiness score</h4>
                    <p>Track feasibility, cost, and ROI on one adaptive dial that updates as your inputs change.</p>
                </article>
            </div>
        </section>

        <!-- Auth Modal -->
        <div id="authModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="authModalTitle">Login</h3>
                    <button class="close-btn" id="closeAuthModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Login Form -->
                    <div id="loginForm" class="auth-form">
                        <form id="loginFormElement">
                            <div class="form-group">
                                <label for="loginEmail">Email</label>
                                <div class="input-with-icon">
                                    <i class="fas fa-envelope"></i>
                                    <input type="email" id="loginEmail" name="email" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="loginPassword">Password</label>
                                <div class="input-with-icon">
                                    <i class="fas fa-lock"></i>
                                    <input type="password" id="loginPassword" name="password" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="loginCaptcha">CAPTCHA</label>
                                <div class="captcha-container">
                                    <img id="loginCaptchaImage" src="" alt="CAPTCHA">
                                    <button type="button" id="refreshLoginCaptcha" class="captcha-refresh">
                                        <i class="fas fa-sync"></i>
                                    </button>
                                    <input type="text" id="loginCaptcha" name="captcha" required>
                                </div>
                            </div>
                            <button type="submit" class="submit-btn">
                                <i class="fas fa-sign-in-alt"></i>
                                Login
                            </button>
                        </form>
                        <div class="auth-separator">
                            <span>OR</span>
                        </div>
                        <div class="oauth-buttons">
                            <button id="googleLoginBtn" class="oauth-btn google">
                                <i class="fab fa-google"></i>
                                Continue with Google
                            </button>
                            <button id="facebookLoginBtn" class="oauth-btn facebook">
                                <i class="fab fa-facebook-f"></i>
                                Continue with Facebook
                            </button>
                            <button id="phoneLoginBtn" class="oauth-btn phone">
                                <i class="fas fa-phone"></i>
                                Continue with Phone
                            </button>
                        </div>
                        <div class="auth-switch">
                            <p>Don't have an account? <a href="#" id="switchToRegister">Sign Up</a></p>
                        </div>
                    </div>

                    <!-- Register Form -->
                    <div id="registerForm" class="auth-form" style="display: none;">
                        <form id="registerFormElement">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="registerFirstName">First Name</label>
                                    <div class="input-with-icon">
                                        <i class="fas fa-user"></i>
                                        <input type="text" id="registerFirstName" name="first_name" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="registerLastName">Last Name</label>
                                    <div class="input-with-icon">
                                        <i class="fas fa-user"></i>
                                        <input type="text" id="registerLastName" name="last_name" required>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="registerEmail">Email</label>
                                <div class="input-with-icon">
                                    <i class="fas fa-envelope"></i>
                                    <input type="email" id="registerEmail" name="email" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="registerPassword">Password</label>
                                <div class="input-with-icon">
                                    <i class="fas fa-lock"></i>
                                    <input type="password" id="registerPassword" name="password" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="registerConfirmPassword">Confirm Password</label>
                                <div class="input-with-icon">
                                    <i class="fas fa-lock"></i>
                                    <input type="password" id="registerConfirmPassword" name="confirm_password" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="registerCaptcha">CAPTCHA</label>
                                <div class="captcha-container">
                                    <img id="registerCaptchaImage" src="" alt="CAPTCHA">
                                    <button type="button" id="refreshRegisterCaptcha" class="captcha-refresh">
                                        <i class="fas fa-sync"></i>
                                    </button>
                                    <input type="text" id="registerCaptcha" name="captcha" required>
                                </div>
                            </div>
                            <button type="submit" class="submit-btn">
                                <i class="fas fa-user-plus"></i>
                                Sign Up
                            </button>
                        </form>
                        <div class="auth-switch">
                            <p>Already have an account? <a href="#" id="switchToLogin">Login</a></p>
                        </div>
                    </div>

                    <!-- Phone Login Form -->
                    <div id="phoneLoginForm" class="auth-form" style="display: none;">
                        <form id="phoneLoginFormElement">
                            <div class="form-group">
                                <label for="phoneCountryCode">Country Code</label>
                                <select id="phoneCountryCode" name="country_code" required>
                                    <option value="1">+1 (US/Canada)</option>
                                    <option value="44">+44 (UK)</option>
                                    <option value="91">+91 (India)</option>
                                    <option value="61">+61 (Australia)</option>
                                    <option value="49">+49 (Germany)</option>
                                    <option value="33">+33 (France)</option>
                                    <option value="81">+81 (Japan)</option>
                                    <option value="86">+86 (China)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="phoneNumber">Phone Number</label>
                                <div class="input-with-icon">
                                    <i class="fas fa-phone"></i>
                                    <input type="tel" id="phoneNumber" name="phone_number" required>
                                </div>
                            </div>
                            <button type="submit" class="submit-btn">
                                <i class="fas fa-paper-plane"></i>
                                Send OTP
                            </button>
                        </form>
                        <div class="auth-switch">
                            <p><a href="#" id="switchToEmailLogin">Back to Email Login</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- OTP Verification Modal -->
        <div id="otpModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Verify OTP</h3>
                    <button class="close-btn" id="closeOtpModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="otp-instructions">
                        <p>Enter the 6-digit OTP sent to your phone number</p>
                        <p id="otpPhoneNumber"></p>
                    </div>
                    <form id="otpForm">
                        <div class="otp-inputs">
                            <input type="text" maxlength="1" class="otp-input" data-index="0">
                            <input type="text" maxlength="1" class="otp-input" data-index="1">
                            <input type="text" maxlength="1" class="otp-input" data-index="2">
                            <input type="text" maxlength="1" class="otp-input" data-index="3">
                            <input type="text" maxlength="1" class="otp-input" data-index="4">
                            <input type="text" maxlength="1" class="otp-input" data-index="5">
                        </div>
                        <button type="submit" class="submit-btn">
                            <i class="fas fa-check"></i>
                            Verify OTP
                        </button>
                    </form>
                    <div class="otp-resend">
                        <p>Didn't receive OTP? <a href="#" id="resendOtp">Resend OTP</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Harvesting Type Selector -->
        <section class="type-selector-section" id="formSection">
            <div class="type-selector-container">
                <div class="selector-header">
                    <h2>Choose Your Harvesting Method</h2>
                    <p>Select the type that best suits your property and needs</p>
                </div>
                <div class="type-options-grid">
                    <!-- Rooftop Option -->
                    <div class="type-option-card" data-type="rooftop" onclick="selectHarvestingType('rooftop')">
                        <div class="type-icon">
                            <i class="fas fa-house"></i>
                        </div>
                        <h3>Rooftop Harvesting</h3>
                        <p class="type-description">Captures rainwater from building roofs. The water is channeled through gutters and pipes into a storage tank or recharge pit. This is a common method for both domestic and larger-scale use.</p>
                        <div class="type-stats">
                            <span class="stat"><i class="fas fa-droplet"></i> High Efficiency</span>
                            <span class="stat"><i class="fas fa-home"></i> Best for Homes</span>
                        </div>
                    </div>

                    <!-- Surface Runoff Option -->
                    <div class="type-option-card" data-type="surface_runoff" onclick="selectHarvestingType('surface_runoff')">
                        <div class="type-icon">
                            <i class="fas fa-water"></i>
                        </div>
                        <h3>Surface Runoff Harvesting</h3>
                        <p class="type-description">Collects rainwater that flows over open grounds or paved surfaces. This runoff is directed into a storage tank or used for groundwater recharge through methods like percolation tanks and trenches.</p>
                        <div class="type-stats">
                            <span class="stat"><i class="fas fa-expand"></i> Larger Areas</span>
                            <span class="stat"><i class="fas fa-leaf"></i> Eco-Friendly</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rooftop Calculator Form -->
        <section class="form-section type-calculator" id="rooftopCalculator" style="display: none;">
            <div class="form-container">
                <div class="calc-header">
                    <button class="back-btn" onclick="backToTypeSelector()"><i class="fas fa-arrow-left"></i> Back</button>
                    <h3><i class="fas fa-house"></i> Rooftop Rainwater Harvesting Calculator</h3>
                </div>
                <form id="rooftopForm">
                    <div class="form-grid">
                        <!-- Location -->
                        <div class="form-group">
                            <label for="rooftopLocation">Location</label>
                            <div class="input-with-icon">
                                <i class="fas fa-map-marker-alt"></i>
                                <input type="text" id="rooftopLocation" name="location" placeholder="Enter your city or address" required>
                                <button type="button" class="location-btn" onclick="getCurrentLocationRooftop()">
                                    <i class="fas fa-crosshairs"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Country Code -->
                        <div class="form-group">
                            <label for="rooftopCountry">Country</label>
                            <select id="rooftopCountry" name="country_code" required>
                                <option value="US">United States (USD)</option>
                                <option value="IN" selected>India (INR)</option>
                                <option value="GB">United Kingdom (GBP)</option>
                                <option value="DE">Germany (EUR)</option>
                                <option value="AU">Australia (AUD)</option>
                                <option value="CA">Canada (CAD)</option>
                            </select>
                        </div>

                        <!-- Roof Area -->
                        <div class="form-group">
                            <label for="rooftopArea">Roof Area (sq ft)</label>
                            <div class="input-with-icon">
                                <i class="fas fa-home"></i>
                                <input type="number" id="rooftopArea" name="roofArea" placeholder="e.g., 1200" min="100" required>
                            </div>
                        </div>

                        <!-- Roof Type -->
                        <div class="form-group">
                            <label for="rooftopRoofType">Roof Type</label>
                            <select id="rooftopRoofType" name="roofType" required>
                                <option value="">Select roof type</option>
                                <option value="concrete">Concrete/RCC</option>
                                <option value="tile">Tile</option>
                                <option value="metal">Metal Sheet</option>
                                <option value="asbestos">Asbestos</option>
                            </select>
                        </div>

                        <!-- Number of People -->
                        <div class="form-group">
                            <label for="rooftopPeople">Number of People</label>
                            <div class="input-with-icon">
                                <i class="fas fa-users"></i>
                                <input type="number" id="rooftopPeople" name="numPeople" placeholder="e.g., 4" min="1" required>
                            </div>
                        </div>

                        <!-- Available Space -->
                        <div class="form-group">
                            <label for="rooftopSpace">Available Open Space (sq ft)</label>
                            <div class="input-with-icon">
                                <i class="fas fa-expand-arrows-alt"></i>
                                <input type="number" id="rooftopSpace" name="availableSpace" placeholder="e.g., 200" min="0" required>
                            </div>
                        </div>

                        <!-- Soil Type -->
                        <div class="form-group">
                            <label for="rooftopSoil">Soil Type</label>
                            <select id="rooftopSoil" name="soilType" required>
                                <option value="">Select soil type</option>
                                <option value="sandy">Sandy</option>
                                <option value="clay">Clay</option>
                                <option value="loamy">Loamy</option>
                                <option value="rocky">Rocky</option>
                            </select>
                        </div>

                        <!-- Pump Type -->
                        <div class="form-group">
                            <label for="rooftopPumpType">Pump Type</label>
                            <select id="rooftopPumpType" name="pumpType" required>
                                <option value="">Select pump type</option>
                                <option value="direct">Direct-Pumped (Tank → Outlet)</option>
                                <option value="indirect">Indirect-Pumped (Tank → Header → Outlets)</option>
                            </select>
                        </div>
                    </div>

                    <button type="submit" class="submit-btn" id="rooftopCalculateBtn">
                        <i class="fas fa-calculator"></i>
                        Calculate
                    </button>
                </form>
            </div>
        </section>

        <!-- Surface Runoff Calculator Form -->
        <section class="form-section type-calculator" id="surfaceRunoffCalculator" style="display: none;">
            <div class="form-container">
                <div class="calc-header">
                    <button class="back-btn" onclick="backToTypeSelector()"><i class="fas fa-arrow-left"></i> Back</button>
                    <h3><i class="fas fa-water"></i> Surface Runoff Harvesting Calculator</h3>
                </div>
                <form id="surfaceRunoffForm">
                    <div class="form-grid">
                        <!-- Location -->
                        <div class="form-group">
                            <label for="surfaceLocation">Location</label>
                            <div class="input-with-icon">
                                <i class="fas fa-map-marker-alt"></i>
                                <input type="text" id="surfaceLocation" name="location" placeholder="Enter your city or address" required>
                                <button type="button" class="location-btn" onclick="getCurrentLocationSurface()">
                                    <i class="fas fa-crosshairs"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Country Code -->
                        <div class="form-group">
                            <label for="surfaceCountry">Country</label>
                            <select id="surfaceCountry" name="country_code" required>
                                <option value="US">United States (USD)</option>
                                <option value="IN" selected>India (INR)</option>
                                <option value="GB">United Kingdom (GBP)</option>
                                <option value="DE">Germany (EUR)</option>
                                <option value="AU">Australia (AUD)</option>
                                <option value="CA">Canada (CAD)</option>
                            </select>
                        </div>

                        <!-- Catchment Area -->
                        <div class="form-group">
                            <label for="surfaceArea">Catchment Area (sq ft)</label>
                            <div class="input-with-icon">
                                <i class="fas fa-expand"></i>
                                <input type="number" id="surfaceArea" name="catchmentArea" placeholder="e.g., 2000" min="100" required>
                            </div>
                        </div>

                        <!-- Surface Type -->
                        <div class="form-group">
                            <label for="surfaceType">Surface Type</label>
                            <select id="surfaceType" name="surfaceType" required>
                                <option value="">Select surface type</option>
                                <option value="paved">Paved/Concrete</option>
                                <option value="gravel">Gravel</option>
                                <option value="soil_bare">Bare Soil</option>
                                <option value="grass">Grass/Vegetation</option>
                            </select>
                        </div>

                        <!-- Number of People -->
                        <div class="form-group">
                            <label for="surfacePeople">Number of People</label>
                            <div class="input-with-icon">
                                <i class="fas fa-users"></i>
                                <input type="number" id="surfacePeople" name="numPeople" placeholder="e.g., 4" min="1" required>
                            </div>
                        </div>

                        <!-- Storage Tank Size -->
                        <div class="form-group">
                            <label for="surfaceStorage">Storage Tank Size (liters)</label>
                            <div class="input-with-icon">
                                <i class="fas fa-water"></i>
                                <input type="number" id="surfaceStorage" name="storageSize" placeholder="e.g., 5000" min="500" required>
                            </div>
                        </div>

                        <!-- Soil Type -->
                        <div class="form-group">
                            <label for="surfaceSoil">Soil Type</label>
                            <select id="surfaceSoil" name="soilType" required>
                                <option value="">Select soil type</option>
                                <option value="sandy">Sandy</option>
                                <option value="clay">Clay</option>
                                <option value="loamy">Loamy</option>
                                <option value="rocky">Rocky</option>
                            </select>
                        </div>

                        <!-- Pump Type -->
                        <div class="form-group">
                            <label for="surfacePumpType">Pump Type</label>
                            <select id="surfacePumpType" name="pumpType" required>
                                <option value="">Select pump type</option>
                                <option value="direct">Direct-Pumped (Tank → Outlet)</option>
                                <option value="indirect">Indirect-Pumped (Tank → Header → Outlets)</option>
                            </select>
                        </div>
                    </div>

                    <button type="submit" class="submit-btn" id="surfaceCalculateBtn">
                        <i class="fas fa-calculator"></i>
                        Calculate
                    </button>
                </form>
            </div>
        </section>

        <!-- Loading Section -->
        <section id="loadingSection" class="loading-section" style="display: none;">
            <div class="loading-content">
                <div class="spinner"></div>
                <h3 data-translate="loading.title">Analyzing Your Property...</h3>
                <p data-translate="loading.subtitle">Fetching weather data, calculating potential, and generating recommendations</p>
            </div>
        </section>

        <!-- Results Section -->
        <section id="resultsSection" class="results-section" style="display: none;">
            <div class="results-container">
                <h3 data-translate="results.title">Your Rainwater Harvesting Report</h3>
                
                <!-- Feasibility Card -->
                <div class="result-card feasibility-card">
                    <div class="card-header">
                        <i class="fas fa-check-circle"></i>
                        <h4 data-translate="results.feasibility">Feasibility Assessment</h4>
                    </div>
                    <div class="card-content">
                        <div id="feasibilityResult" class="feasibility-result"></div>
                    </div>
                </div>

                <!-- Water Collection Potential -->
                <div class="result-card">
                    <div class="card-header">
                        <i class="fas fa-tint"></i>
                        <h4 data-translate="results.potential">Water Collection Potential</h4>
                    </div>
                    <div class="card-content">
                        <div class="metrics-grid">
                            <div class="metric">
                                <span class="metric-value" id="annualCollection">0</span>
                                <span class="metric-label" data-translate="results.annualLiters">Liters/Year</span>
                            </div>
                            <div class="metric">
                                <span class="metric-value" id="monthlyCollection">0</span>
                                <span class="metric-label" data-translate="results.monthlyLiters">Liters/Month</span>
                            </div>
                            <div class="metric">
                                <span class="metric-value" id="savings">0</span>
                                <span class="metric-label" id="savingsLabel">Annual Savings</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recommended System -->
                <div class="result-card">
                    <div class="card-header">
                        <i class="fas fa-cogs"></i>
                        <h4 data-translate="results.system">Recommended System</h4>
                    </div>
                    <div class="card-content">
                        <div id="systemRecommendation"></div>
                    </div>
                </div>

                <!-- Cost Analysis -->
                <div class="result-card">
                    <div class="card-header">
                        <i class="fas fa-coins"></i>
                        <h4 data-translate="results.cost">Cost Analysis</h4>
                    </div>
                    <div class="card-content">
                        <div class="cost-breakdown" id="costBreakdown"></div>
                    </div>
                </div>

                <!-- Weather Data -->
                <div class="result-card">
                    <div class="card-header">
                        <i class="fas fa-cloud-rain"></i>
                        <h4 data-translate="results.weather">Local Weather Data</h4>
                    </div>
                    <div class="card-content">
                        <div id="weatherData"></div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button id="saveCalculation" class="action-btn primary">
                        <i class="fas fa-save"></i>
                        <span data-translate="results.save">Save Calculation</span>
                    </button>
                    <button id="downloadReport" class="action-btn secondary">
                        <i class="fas fa-download"></i>
                        <span data-translate="results.download">Download Report</span>
                    </button>
                    <button id="shareReport" class="action-btn">
                        <i class="fas fa-share"></i>
                        <span data-translate="results.share">Share Report</span>
                    </button>
                    <button id="newCalculation" class="action-btn">
                        <i class="fas fa-redo"></i>
                        <span data-translate="results.new">New Calculation</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Education Deep Dive -->
        <section class="education-section" id="learnMore">
            <div class="section-header">
                <p class="eyebrow">Rainwater Harvesting 360°</p>
                <h3>Everything you need to evaluate, build, and sustain a high-performance system</h3>
                <p>From hydrology math to maintenance cadences, this hub keeps homeowners, architects, and HOAs aligned.</p>
            </div>
            <div class="education-grid">
                <article class="education-card">
                    <div class="card-icon glass">
                        <i class="fas fa-ruler-combined"></i>
                    </div>
                    <h4>1. Site assessment</h4>
                    <ul>
                        <li>Capture roof geometry, slopes, obstructions, gutter depths.</li>
                        <li>Measure runoff coefficients for RCC (0.85), tiles (0.75), metal (0.9).</li>
                        <li>Map setbacks and municipal recharge mandates.</li>
                    </ul>
                </article>
                <article class="education-card">
                    <div class="card-icon glass">
                        <i class="fas fa-droplet"></i>
                    </div>
                    <h4>2. Catchment & filtration</h4>
                    <ul>
                        <li>Design first-flush diverters (1 mm rainfall flush) plus dual-stage mesh.</li>
                        <li>Add media filters (charcoal + sand + pebble) before storage.</li>
                        <li>Use food-grade PVC, HDPE, or RCC sumps with overflow to recharge pits.</li>
                    </ul>
                </article>
                <article class="education-card">
                    <div class="card-icon glass">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h4>3. Storage & automation</h4>
                    <ul>
                        <li>Size tanks via <strong>Annual Rainfall × Roof Area × Coefficient ÷ 12</strong>.</li>
                        <li>Deploy smart float valves, IoT depth sensors, auto backwash.</li>
                        <li>Mix gravity feed + booster pumps for dual plumbing lines.</li>
                    </ul>
                </article>
                <article class="education-card">
                    <div class="card-icon glass">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <h4>4. Recharge & upkeep</h4>
                    <ul>
                        <li>Create percolation pits (1×1×2 m) with staggered bore shafts.</li>
                        <li>Desilt filters every monsoon onset + quarterly inspections.</li>
                        <li>Track TDS, turbidity, and tank hygiene via lab tests every 6 months.</li>
                    </ul>
                </article>
            </div>
            <div class="process-flow">
                <div class="process-step">
                    <span>Assess</span>
                    <small>GIS + survey</small>
                </div>
                <div class="process-step">
                    <span>Capture</span>
                    <small>Roof to gutters</small>
                </div>
                <div class="process-step">
                    <span>Filter</span>
                    <small>First-flush + media</small>
                </div>
                <div class="process-step">
                    <span>Store</span>
                    <small>Tanks & reuse</small>
                </div>
                <div class="process-step">
                    <span>Recharge</span>
                    <small>Pits + wells</small>
                </div>
            </div>
            <div class="metrics-band">
                <div class="metric-pill">
                    <strong>60,000–90,000 L</strong>
                    <span>annual capture from a 1,500 sq ft RCC roof @ 800 mm rainfall</span>
                </div>
                <div class="metric-pill">
                    <strong>₹45k–₹1.2L</strong>
                    <span>typical turnkey system cost (pump, tank, recharge bundle)</span>
                </div>
                <div class="metric-pill">
                    <strong>18–24 months</strong>
                    <span>median payback when replacing 3–4 tanker trips per week</span>
                </div>
            </div>
        </section>

        <!-- Knowledge Panels -->
        <section class="knowledge-section">
            <div class="knowledge-grid">
                <div class="knowledge-panel rainfall">
                    <div class="panel-header">
                        <h4>Rainfall to storage matrix</h4>
                        <p>Quickly benchmark your city using long-term IMD normals.</p>
                    </div>
                    <table class="rainfall-table">
                        <thead>
                            <tr>
                                <th>City</th>
                                <th>Avg Rain (mm)</th>
                                <th>Harvestable L / 1000 sq ft</th>
                                <th>Suggested system</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Mumbai</td>
                                <td>2,400</td>
                                <td>1,700,000</td>
                                <td>Dual tank + recharge trenches</td>
                            </tr>
                            <tr>
                                <td>Bengaluru</td>
                                <td>970</td>
                                <td>680,000</td>
                                <td>Modular sump + bore recharge</td>
                            </tr>
                            <tr>
                                <td>Delhi NCR</td>
                                <td>790</td>
                                <td>550,000</td>
                                <td>Filtration + recharge shafts (mandatory)</td>
                            </tr>
                            <tr>
                                <td>Hyderabad</td>
                                <td>900</td>
                                <td>630,000</td>
                                <td>Surface tank + pit hybrid</td>
                            </tr>
                            <tr>
                                <td>Chennai</td>
                                <td>1,400</td>
                                <td>980,000</td>
                                <td>Roof flushing + sump + recharge well</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="knowledge-panel insights">
                    <div class="panel-header">
                        <h4>Design guardrails</h4>
                        <p>Use these parameters to keep your installation resilient.</p>
                    </div>
                    <div class="panel-list">
                        <div>
                            <strong>First-flush sizing</strong>
                            <p>Divert 1–2 mm of the first rainfall using 0.65 L per sq ft of roof to purge contaminants.</p>
                        </div>
                        <div>
                            <strong>Filtration velocity</strong>
                            <p>Maintain 10–15 m³/hr/m² to prevent media lift and ensure 30 µm particulates are captured.</p>
                        </div>
                        <div>
                            <strong>Recharge pit spacing</strong>
                            <p>Keep pits 6 m away from foundations, 1.5 m above water table, and interconnect via perforated pipes.</p>
                        </div>
                        <div>
                            <strong>Monitoring routine</strong>
                            <p>Monthly: gutter sweep, sensor check. Quarterly: flush, desludge. Annual: structural audit + lab test.</p>
                        </div>
                    </div>
                    <div class="panel-highlight">
                        <i class="fas fa-shield-alt"></i>
                        <div>
                            <h5>Compliance ready</h5>
                            <p>Meets NBC 2016 Part 9, CGWA recharge norms, and most Smart City mandates when configured with dual pits.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ / Details -->
        <section class="faq-section">
            <div class="section-header">
                <p class="eyebrow">Deep dive answers</p>
                <h3>Every detail about rainwater harvesting, demystified</h3>
                <p>Share these playbooks with residents, RWA boards, and building consultants.</p>
            </div>
            <div class="faq-accordion">
                <article class="faq-item">
                    <header>
                        <h4>How do I estimate daily yield?</h4>
                        <i class="fas fa-plus"></i>
                    </header>
                    <p>Daily yield (liters) = <strong>Rainfall (mm) × Roof Area (sq m) × Runoff coefficient</strong>. Divide by 30 for monthly distribution, then adjust for seasonal skew (60% of Indian rain falls in 90 days).</p>
                </article>
                <article class="faq-item">
                    <header>
                        <h4>What about water quality & reuse?</h4>
                        <i class="fas fa-plus"></i>
                    </header>
                    <p>For potable intent, pair UV + UF polishing post storage. For flushing and gardening, ensure TDS < 500 ppm, turbidity < 5 NTU, pH 6.5–8.5, and disinfect with chlorine dosing (1–2 ppm) after every major rain.</p>
                </article>
                <article class="faq-item">
                    <header>
                        <h4>How does rainwater harvesting help groundwater?</h4>
                        <i class="fas fa-plus"></i>
                    </header>
                    <p>Each 10,000 liters recharged can raise water table by 4–12 mm depending on soil porosity. Multiple pits distributed along plot edges accelerate aquifer recovery and reduce stormwater runoff by up to 70%.</p>
                </article>
                <article class="faq-item">
                    <header>
                        <h4>Can I integrate with smart home dashboards?</h4>
                        <i class="fas fa-plus"></i>
                    </header>
                    <p>Yes—connect ultrasonic level sensors, flow meters, and solenoid valves to Modbus / Wi-Fi gateways for dashboards (Home Assistant, Blynk). Set up automations to trigger pump cut-offs, tanker alerts, and maintenance reminders.</p>
                </article>
            </div>
        </section>

        <!-- User History Section -->
        <section id="historySection" class="history-section" style="display: none;">
            <div class="history-container">
                <h3>Calculation History</h3>
                <div id="historyList" class="history-list">
                    <!-- History items will be populated here -->
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4 data-translate="footer.about">About RainHarvest Pro</h4>
                    <p data-translate="footer.description">Empowering communities to conserve groundwater through smart rainwater harvesting solutions.</p>
                </div>
                <div class="footer-section">
                    <h4 data-translate="footer.resources">Resources</h4>
                    <ul>
                        <li><a href="#" data-translate="footer.guide">Installation Guide</a></li>
                        <li><a href="Maintainence.txt" data-translate="footer.maintenance">Maintenance Tips</a></li>
                        <li><a href="FAQ.txt" data-translate="footer.faq">FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4 data-translate="footer.contact">Contact</h4>
                    <p data-translate="footer.support"> Support: rainharvestpro@gmail.com </p>
                    <div class="social-links">
                        <a href="https://x.com/rainharvestpro"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.instagram.com/rainharvest_pro/#"><i class="fab fa-instagram"></i></a>
                        <a href="https://www.youtube.com/@RainHarvestPro"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- AI Chatbot -->
    <div class="chatbot">
        <button class="chatbot-launcher" id="chatbotToggle" aria-label="Open RainHarvest AI assistant">
            <i class="fas fa-comments"></i>
            <span>Ask RainHarvest AI</span>
        </button>
        <div class="chatbot-window" id="chatbotWindow" aria-live="polite">
            <div class="chatbot-header">
                <div>
                    <h4>AquaGuide AI</h4>
                    <p>Your rainwater harvesting copilot</p>
                </div>
                <button id="chatbotClose" class="chatbot-close" aria-label="Close chatbot">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chatbot-body">
                <div id="chatMessages" class="chat-messages"></div>
                <div class="chat-suggestions">
                    <button class="chat-suggestion" data-question="How much water can my roof capture?">Capture potential</button>
                    <button class="chat-suggestion" data-question="What maintenance does the system need?">Maintenance plan</button>
                    <button class="chat-suggestion" data-question="Is recharge compulsory in my city?">Recharge rules</button>
                </div>
            </div>
            <form id="chatbotForm" class="chatbot-input">
                <input type="text" id="chatbotInput" placeholder="Ask anything about rainwater harvesting..." autocomplete="off" required>
                <button type="submit" aria-label="Send message">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer" class="notification-container"></div>

    <script src="static/translations.js"></script>
    <script src="static/app.js"></script>
</body>
</html>
